/* $Id: environment_indicator.min.js,v 1.3 2009/12/12 17:52:04 mrfelton Exp $ */

/**
 * @file
 * Environment info JavaScript.
 *
 * @author Tom Kirkpatrick (mrfelton), www.kirkdesigns.co.uk
 */
(function($){Drupal.environmentIndicator=Drupal.environmentIndicator||{};Drupal.behaviors.environmentIndicator={attach:function(context,settings){settings.environment_indicator=$.extend({text:' ',color:'#d00c0c',suppress:false,margin:false,position:'left'},settings.environment_indicator||{});if(settings.environment_indicator.suppress){return;};if($('body:not(.environment-indicator-processed|.overlay)',context).length){settings.environment_indicator.cssClass='environment-indicator-'+settings.environment_indicator.position;var $environmentIndicator=$('#environment-indicator',context);if(!$environmentIndicator.length){$('body',context).prepend('<div id="environment-indicator">'+settings.environment_indicator.text+'</div>');$('body',context).addClass(settings.environment_indicator.cssClass);var $environmentIndicator=$('#environment-indicator',context);$environmentIndicator.css('background-color',settings.environment_indicator.color);$environmentIndicator.html($environmentIndicator.text().replace(/(.)/g,"$1<br />"));if(settings.environment_indicator.margin){$('body:not(.environment-indicator-adjust)',context).addClass('environment-indicator-adjust');if($("#admin-menu").length){$("#admin-menu").css('margin-'+settings.environment_indicator.position,'30px');$("#admin-menu").css('width',$("#admin-menu").width()-30+'px');$(window).resize(Drupal.environmentIndicator.stretchAdminMenu(settings));}
if($("#toolbar").length){$("#toolbar").css('margin-'+settings.environment_indicator.position,'30px');}}}
$('body:not(.environment-indicator-processed)',context).addClass('environment-indicator-processed');}}};Drupal.environmentIndicator.stretchAdminMenu=function(settings){if(settings.environment_indicator.margin){$("#admin-menu").css('width',$("body").width()+'px');}};$.fn.backgroundPosition=function(){var p=$(this).css('background-position');if(typeof(p)==='undefined'){p=$(this).css('background-position-x')+' '+$(this).css('background-position-y');}
var posX=p.split(' ')[0].replace(/px/,'');var posY=p.split(' ')[1].replace(/px/,'');return[posX,posY];};})(jQuery);
